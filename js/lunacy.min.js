/*! Lunacy 0.5.0 --- Minified JS */
!function(a){a.fn.extend({lunacy:function(b){function c(a,b){var c=q[a];"a"==b?i.append(c.clone()):i.prepend(c.clone())}function d(b){!i.hasClass(p.still)||"l"!=b&&"r"!=b||1!=p.buttons||(i.removeClass(p.still),"r"==b?(j.removeClass(p.center).next().addClass(p.center),j=a("."+p.center),k=j.data("index"),i.addClass(p.right).one(r,function(){i.hasClass(p.right)&&(i.removeClass(p.right).addClass(p.still),$lunas.first().remove(),l=k+2>=m?k+2-m:k+2,c(l,"a"))})):(j.removeClass(p.center).prev().addClass(p.center),j=a("."+p.center),k=j.data("index"),i.addClass(p.left).one(r,function(){i.hasClass(p.left)&&(i.removeClass(p.left).addClass(p.still),$lunas.last().remove(),l=0>k-2?m+(k-2):k-2,c(l,"p"))})),$lunas=a(".luna",f),e())}function e(){1==p.lazyLoad&&$lunas.find("img").each(function(){var b=a(this);b.hide().attr("src",b.data("lazy")).show()})}var f,g,h,i,j,k,l,m,n,o={buttonLocation:"outside",lazyLoad:!1,buttons:!0,right:"lunacy-right",left:"lunacy-left",still:"lunacy-still",center:"luna-center"},p=a.extend(o,b),q=new Array,n=new Array,r="transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd";return this.each(function(){if(f=a(this),q=[],n=[],g=f.children(),g.length){switch(f.addClass("has-lunacy"),"absolute"!=f.parent().css("position")&&f.parent().css("position","relative"),g.length>=3&&1==p.buttons?(f.addClass("btn-"+p.buttonLocation).append('<button class="lunacy-btn btn-prev">Prev</button><button class="lunacy-btn btn-next">Next</button>'),a("button",f).click(function(){var b=a(this);b.hasClass("btn-next")?d("r"):b.hasClass("btn-prev")&&d("l")})):p.buttons=!1,g.each(function(b){var c=a(this);1==p.lazyLoad&&c.find("img").each(function(){var b=a(this);b.attr("data-lazy",b.attr("src")).attr("src","")}),q.push(c.addClass("luna").attr("data-index",b)),c.remove()}),m=q.length,f.append('<div class="lunacy-outer"></div>'),h=a(".lunacy-outer",f),h.append('<div class="lunacy lunacy-has-'+m+" "+p.still+'"></div>'),i=a(".lunacy",f),m){case 1:c(0,"a");break;case 2:n=Array(0,1);break;default:n=Array(0,1,2,m-2,m-1)}for(var b=0;b<n.length;b++)c(n[b],"a");$lunas=a(".luna",f),m>2?($lunas.eq(0).addClass(p.center),j=a("."+p.center),k=j.data("index"),$lunas.eq(4).detach().prependTo(i),$lunas.eq(3).detach().prependTo(i)):$lunas.addClass(p.center),$lunas=a(".luna",f),e()}})}})}(jQuery);