/*! Lunacy 0.5.0 --- Minified JS */
!function(a){a.fn.extend({lunacy:function(b){function c(a,b){var c=u[a];"a"==b?i.append(c.clone()):i.prepend(c.clone())}function d(b){!i.hasClass(t.still)||"l"!=b&&"r"!=b||1!=t.buttons||(i.removeClass(t.still),"r"==b?(o=j.next(),p=$lunas.first(),q=t.right,r="a",l=k+3>=m?k+3-m:k+3):(o=j.prev(),p=$lunas.last(),q=t.left,r="p",l=0>k-3?m+(k-3):k-3),j.removeClass(t.center),o.addClass(t.center),j=o,k=o.data("index"),i.addClass(q).one(v,function(){i.hasClass(q)&&(i.removeClass(q).addClass(t.still),p.remove(),c(l,r))}),$lunas=a(".luna",f),e())}function e(){1==t.lazyLoad&&$lunas.find("img").each(function(){var b=a(this);b.hide().attr("src",b.data("lazy")).show()})}var f,g,h,i,j,k,l,m,n,o,p,q,r,s={buttonLocation:"outside",lazyLoad:!1,buttons:!0,right:"lunacy-right",left:"lunacy-left",still:"lunacy-still",center:"luna-center"},t=a.extend(s,b),u=new Array,n=new Array,v="transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd";return this.each(function(){if(f=a(this),u=[],n=[],g=f.children(),g.length){switch(f.addClass("has-lunacy"),"absolute"!=f.parent().css("position")&&f.parent().css("position","relative"),g.length>=3&&1==t.buttons?(f.addClass("btn-"+t.buttonLocation).append('<button class="lunacy-btn btn-prev">Prev</button><button class="lunacy-btn btn-next">Next</button>'),a("button",f).click(function(){var b=a(this);b.hasClass("btn-next")?d("r"):b.hasClass("btn-prev")&&d("l")})):t.buttons=!1,g.each(function(b){var c=a(this);1==t.lazyLoad&&c.find("img").each(function(){var b=a(this);b.attr("data-lazy",b.attr("src")).attr("src","")}),u.push(c.addClass("luna").attr("data-index",b)),c.remove()}),m=u.length,f.append('<div class="lunacy-outer"></div>'),h=a(".lunacy-outer",f),h.append('<div class="lunacy lunacy-has-'+m+" "+t.still+'"></div>'),i=a(".lunacy",f),m){case 1:c(0,"a");break;case 2:n=Array(0,1);break;default:n=Array(0,1,2,m-2,m-1)}for(var b=0;b<n.length;b++)c(n[b],"a");$lunas=a(".luna",f),m>2?($lunas.eq(0).addClass(t.center),j=a("."+t.center),k=j.data("index"),$lunas.eq(4).detach().prependTo(i),$lunas.eq(3).detach().prependTo(i)):$lunas.addClass(t.center),$lunas=a(".luna",f),e()}})}})}(jQuery);